(function(n){function o(e,f){q[e.replace(s,"")]=f}function r(e){return q[e.replace(s,"")]}var s=/^.+\//,q={};o("fs",{readFile:function(e,f,g){jQuery.ajax({url:e,type:"get",dataType:"text",isLocal:!0,success:function(b){g(null,b)}})},readFileSync:function(e){return jQuery.ajax({url:e,type:"get",async:!1,dataType:"text",isLocal:!0}).responseText},lstatSync:function(){return{mtime:0}}});(function(e,f){function g(a){return q[a]}function b(a){if(!(this instanceof b))return new b(a);var p=[],m=[],c,d,e=
!0,g=!0,k=!1,h=this;h.done=function(a){e&&a&&(k?a(d):p.push(a));return h};h.fail=function(a){g&&a&&(k?a(d):m.push(a));return h};h.then=function(a,p){return h.done(a).fail(p)};h.reject=function(a){e=!1;k=!0;for(d=a;m.length;)m.shift()(a);return h};h.resolve=function(a){g=!1;k=!0;for(d=a;p.length;)p.shift()(a);return h};h.promise=function(){c===f&&(c={done:h.done,fail:h.fail,then:h.then,promise:h.promise});return c};a!==f&&a(h)}var c=Object.prototype.toString,d=String.prototype.trim,t=/^#/,k=[].slice,
u=/^\s+/,v=/\s+$/,i=/[&<>"]/g,n=/'/g,q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l="undefined"!==typeof console&&console,j={Array:function(a){a=a||[];a.map=a.map||function(a){for(var m=[],b=0,c=this.length;b<c;b++)m.push(a(this[b]));return m};a.add=function(a,b,c){a.__order=~~c;b===f?this.push(a):0==b?this.unshift(a):this.splice(b,0,a);return this};a.addOrder=function(a,b){return this.add(a,f,b)};a.addMulti=function(a,b){a.length&&this.splice.apply(this,[b,0].concat(a));return this};a.order=
function(){this.sort(function(a,b){return a.__order-b.__order});return this};return a},$:function(a){return"string"==typeof a?document.getElementById(a.replace(t,"")):a},sizeof:function(a){var b=0;if(a&&(j.isArray(a)||"object"==typeof a))"length"in a?b=a.length:j.each(a,function(){b++});return b},isArray:function(a){return"[object Array]"==c.call(a)},uniqId:function(){return(new Date).getTime()+""+Math.round(1E3*Math.random())},ns:function(a,b,c){var b=b.split("."),d=b.pop();j.each(b,function(b){a[b]||
(a[b]={});a=a[b]});a[d]=c},escape:function(a){return"string"===typeof a&&i.test(a)?a.replace(i,g):a},addslashes:function(a){return a.replace(n,"\\'")},log:l&&"object"==typeof l.log?Function.prototype.call.bind(l.log,l):function(){l&&l.log.apply(l,arguments)},exception:function(a,b,c){throw{message:a,line:b,file:c};},error:function(a,b,c){b="Error: "+a.message+" in "+(a.file||c)+" on line "+(a.line||b);a.stack&&(b+="\n"+a.stack);j.log(b);return b},keys:function(a){var b=[];Object.keys?b=Object.keys(a):
j.each(a,function(a){b.push(a)});return b},each:function(a,b,c){if(a)if(a.forEach)a.forEach(b,c);else if("length"in a&&0 in a)for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)},cycle:function(a,b,c){for(;a<=b;a++)c(a)},trim:d?function(a){return d.call(a)}:function(a){return(""+a).replace(u,"").replace(v,"")},extend:function(a){a=a||{};j.each(arguments,function(b,c){0<c&&j.each(b,function(b,c){a[c]=b})});return a},indexOf:function(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},inherit:function(a,b,c,d){if(2===arguments.length){var e=function(){};e.prototype=b.prototype;a.prototype=new e;a.prototype.self=a;a.prototype.constructor=a;j.each(b,function(b,c){a[c]=b})}else return b.prototype[c].apply(a,d)},defer:b,load:function(a,b,c,d){var f=j.defer();b?e.readFile(a,c||"utf-8",function(a,b){f[a?"reject":"resolve"](a||b)}):f.resolve(r("fs").readFileSync(a,c||"utf-8"));return f.done(d).promise()},mtime:function(a){return e?
+Date.parse(e.lstatSync(a).mtime):0},writeFile:function(a,b,c){e&&e.writeFileSync(a,b,c)},getJSON:function(a,b,c){var d=j.defer();if(e)try{d.resolve(JSON.parse(e.readFileSync(a,b)))}catch(f){d.reject()}return d.fail(function(){c(!0)}).done(function(a){c(!1,a)}).promise()}};b.prototype={constructor:b};b.when=function(a){var c=b(),d=[];a instanceof b?d.push.apply(d,arguments):d=a;var e=0,f=d.length,k=function(){++e==f&&c.resolve()};j.each(d,function(a){a.done(k)});f||c.resolve();return c.promise()};
Function.prototype.bind===f&&(Function.prototype.bind=function(a){var b=k.call(arguments,1),c=this;return function(){return c.apply(a,b.concat(k.call(arguments,0)))}});"undefined"!==typeof o?o("./utils",j):module.exports=j})(r("fs"));(function(e,f){function g(b,c){this._data="";this._pullLen=0;this._active=!0;this._stream=c;this._callback=b}g.prototype={constructor:g,on:function(){this._active=!0},off:function(){this._active=!1},v:function(b){this._active&&b!==f&&(this._data+=e.escape(b))},w:function(b){this._active&&
(this._data+=b)},write:function(b){if(this._active)if(1<arguments.length){var c="",d=arguments,e=d.length,f=0;switch(e){case 9:c=d[8]+c;case 8:c=d[7]+c;case 7:c=d[6]+c;case 6:c=d[5]+c;case 5:c=d[4]+c;case 4:c=d[3]+c;case 3:c=d[2]+c;case 2:this._data+=d[0]+d[1]+c;break;default:for(e=d.length;f<e;)this._data+=d[f++]}}else this._data+=b},cycle:function(){this._active&&e.cycle.apply(e,arguments)},each:function(){this._active&&e.each.apply(e,arguments)},block:function(b,c,d){this.w(this.getBlock(b,c,d))},
blockLabel:function(b,c,d){this._active&&(d!==f&&this.setBlock(b,d,!0),this._blocks===f&&(this._chunks=[],this._blocks=[],this._attrs=[]),b=this._chunks.push(this._data,b)-1,this._blocks.push(b),c!==f&&(this._attrs[b]=c),this._data="")},setBlock:function(b,c,d){this._block===f&&(this._block={});if(!0!==d||this._block[b]===f)this._block[b]=c},getBlock:function(b,c,d){this._block[b]!==f&&(d=this._block[b]);return d!==f?(b=new g,b._block=this._block,d(b,c),b.toStr()):""},pullSync:function(b,c,d){this.pull(b,
c,d)},pull:function(b,c,d){this._pull===f&&(this._pull={});if(this._pull[c]===f){var g=e.defer(),k=function(){this._pullLen--;setTimeout(this.end.bind(this),0)}.bind(this);this._pullLen++;this._pull[c]=g.then(k,k);try{b[c](function(b,c){g[b?"reject":"resolve"](b||c)})}catch(i){g.reject(!0)}}d!==f&&this._pull[c].then(function(b){d(null,b)},function(b){d(b)});return this._pull[c].promise()},end:function(){this._stream&&(this._callback(this._data),this._data="");if(0===this._pullLen){if(this._blocks!==
f){for(var b=this._blocks,c=this._chunks,d=this._attrs,e=c.length,g=b.length,i;g--;)i=b[g],c[i]=this.getBlock(c[i],d[i]);b=c[--e];for(g=e;g--;)b=c[g]+b;this._data=b+this._data}this._callback(this._data);this._stream&&this._callback(null)}},isActive:function(){return 0!==this._pullLen},toStr:function(){return this._data}};"undefined"!==typeof o?o("./Buffer",g):module.exports=g})(r("./utils"));var i=n.AsyncTpl=n.AsyncTpl||{};i.require=r;i.fetch=function(e,f,g){g(i["__"+e](f))};(function(e){e&&(e.tpl=
function(e,g,b){b="__"+e;return b in i?i[b](g):"[AsyncTpl] "+e+" -- template not found"},e.fn.tpl=function(f,g){this.length&&1==this[0].nodeType&&(this[0].innerHTML=e.tpl(f,g));return this})})(n.jQuery)})(this);
